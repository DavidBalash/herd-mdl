



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://finraos.github.io/herd-mdl/admin-guide/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../">
      <meta name="generator" content="mkdocs-0.17.4, mkdocs-material-2.5.4">
    
    
      
        <title>Administration - Herd-MDL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.css">
      
    
    
      <script src="../assets/javascripts/modernizr.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#herd-mdl-administration-guide" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a target="_parent" href="https://finraos.github.io/herd-mdl/" title="Herd-MDL" class="md-header-nav__button md-logo">
          
            <img src="../images/herd_logo_large.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Herd-MDL
              </span>
              <span class="md-header-nav__topic">
                Administration
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/herd_logo_large.png" width="24" height="24">
      
    </span>
    Herd-MDL
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="What is Herd-MDL?" class="md-nav__link">
      What is Herd-MDL?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basic-install/" title="Basic Install" class="md-nav__link">
      Basic Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../user-guide/" title="User Guide" class="md-nav__link">
      User Guide
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Administration
      </label>
    
    <a href="./" title="Administration" class="md-nav__link md-nav__link--active">
      Administration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Contents </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-login-to-ec2-instance-of-mdl" title="How To Login to EC2 Instance of MDL" class="md-nav__link">
    How To Login to EC2 Instance of MDL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-find-mdl-user-credentials-to-login-to-herdshepherdbdsql" title="How To Find MDL User Credentials to Login to Herd/Shepherd/Bdsql" class="md-nav__link">
    How To Find MDL User Credentials to Login to Herd/Shepherd/Bdsql
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-tos-for-initial-creation-of-herd-metadata" title="How Tos for initial creation of Herd metadata" class="md-nav__link">
    How Tos for initial creation of Herd metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-add-the-object-in-herd-to-metastor" title="How To Add the Object in Herd to Metastor" class="md-nav__link">
    How To Add the Object in Herd to Metastor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-query-the-data-in-bdsql" title="How To Query the Data in BDSQL" class="md-nav__link">
    How To Query the Data in BDSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-manage-openldap-users-groups" title="How To Manage OpenLDAP Users &amp; Groups" class="md-nav__link">
    How To Manage OpenLDAP Users &amp; Groups
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" title="Known Issues" class="md-nav__link">
    Known Issues
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tech-overview/" title="Technical Overview" class="md-nav__link">
      Technical Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../advanced-install/" title="Advanced Install" class="md-nav__link">
      Advanced Install
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Contents </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-to-login-to-ec2-instance-of-mdl" title="How To Login to EC2 Instance of MDL" class="md-nav__link">
    How To Login to EC2 Instance of MDL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-find-mdl-user-credentials-to-login-to-herdshepherdbdsql" title="How To Find MDL User Credentials to Login to Herd/Shepherd/Bdsql" class="md-nav__link">
    How To Find MDL User Credentials to Login to Herd/Shepherd/Bdsql
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-tos-for-initial-creation-of-herd-metadata" title="How Tos for initial creation of Herd metadata" class="md-nav__link">
    How Tos for initial creation of Herd metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-add-the-object-in-herd-to-metastor" title="How To Add the Object in Herd to Metastor" class="md-nav__link">
    How To Add the Object in Herd to Metastor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-query-the-data-in-bdsql" title="How To Query the Data in BDSQL" class="md-nav__link">
    How To Query the Data in BDSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-manage-openldap-users-groups" title="How To Manage OpenLDAP Users &amp; Groups" class="md-nav__link">
    How To Manage OpenLDAP Users &amp; Groups
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" title="Troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-issues" title="Known Issues" class="md-nav__link">
    Known Issues
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="herd-mdl-administration-guide">Herd-MDL Administration Guide<a class="headerlink" href="#herd-mdl-administration-guide" title="Permanent link">&para;</a></h1>
<h2 id="how-to-login-to-ec2-instance-of-mdl">How To Login to EC2 Instance of MDL<a class="headerlink" href="#how-to-login-to-ec2-instance-of-mdl" title="Permanent link">&para;</a></h2>
<p><strong>Prerequisite</strong></p>
<ul>
<li>
<p>AWS Console Access of the AWS Account, where MDL is created</p>
</li>
<li>
<p>SSH Client (Example Putty)</p>
</li>
<li>MDL Instance Name of the MDL stack<ul>
<li>This is the parameter to the MDL Cloudformation Stack</li>
</ul>
</li>
<li>Bastion Host in the VPC in case of connectivity issues to the private subnet</li>
</ul>
<p><strong>Steps</strong></p>
<ul>
<li>Login to AWS Console and navigate to SSM Parameter section (Refer <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-console.html">AWS Documentation</a>)</li>
<li>Open Parameter /app/MDL/${MDLInstanceName}/${Environment}/KEYS/KeypairName<ul>
<li>Example : /app/MDL/mdl/dev/KEYS/KeypairName</li>
</ul>
</li>
<li>Get the Value for the above parameter. That value specifies the keyName which holds the pem file<ul>
<li>Example: app_mdl_dev</li>
</ul>
</li>
<li>Open Parameter "app_mdl_dev" - Value from the previous step<ul>
<li>The value of this parameter is a SecureString and that is the PEM file for the node</li>
</ul>
</li>
<li>Login to the node using SSH client with user name "ec2-user" and the PEM file from previous step<ul>
<li>Default AMI has ec2-user configuration</li>
</ul>
</li>
</ul>
<h2 id="how-to-find-mdl-user-credentials-to-login-to-herdshepherdbdsql">How To Find MDL User Credentials to Login to Herd/Shepherd/Bdsql<a class="headerlink" href="#how-to-find-mdl-user-credentials-to-login-to-herdshepherdbdsql" title="Permanent link">&para;</a></h2>
<p>This section describes how to locate credentials required for endpoints when you have installed with EnableSSLAndAuth=true. </p>
<p><strong>Prerequisites</strong></p>
<ul>
<li>AWS Console Access of the AWS Account, where MDL is created</li>
<li>MDL Instance Name of the MDL stack<ul>
<li>This is the parameter to the MDL Cloudformation Stack</li>
</ul>
</li>
<li>EnableSSLAndAuth must be set to true while creating the stack</li>
</ul>
<p><strong>Steps</strong></p>
<ul>
<li>Login to AWS Console and navigate to SSM Parameter section (Refer <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-console.html">AWS Documentation</a>)</li>
<li>User Name<ul>
<li>Open Parameter /app/MDL/${MDLInstanceName}/${Environment}/LDAP/MdlAppUsername<ul>
<li>Example :  /app/MDL/mdl/dev/LDAP/MdlAppUsername</li>
</ul>
</li>
<li>Get the Value for the above parameter. That value specifies the user name for Herd/Bdsql/Shepherd<ul>
<li>Example: ldap_mdl_app_user</li>
</ul>
</li>
</ul>
</li>
<li>Password  <ul>
<li>Open Parameter /app/MDL/${MDLInstanceName}/${Environment}/LDAP/MDLAppPassword<ul>
<li>Example :  /app/MDL/mdl/dev/LDAP/MDLAppPassword</li>
</ul>
</li>
<li>Get the Value for the above parameter. That value specifies the password for Herd/Bdsql/Shepherd, and this parameter is a Secure String<ul>
<li>Example: ODMyOTdmZmE5</li>
</ul>
</li>
</ul>
</li>
<li>Use the above User name, and Password to login to Herd/Shepherd/Bdsql  </li>
</ul>
<h2 id="how-tos-for-initial-creation-of-herd-metadata">How Tos for initial creation of Herd metadata<a class="headerlink" href="#how-tos-for-initial-creation-of-herd-metadata" title="Permanent link">&para;</a></h2>
<p>Refer to <a href="https://github.com/FINRAOS/herd/wiki/quick-start-to-registering-data#create-a-new-storage-instance">Herd Documentation</a> for details on the following:
<em>  Add Storage in Herd
</em>  Create New Namespace in Herd
<em>  Create New Business Object in Herd
</em>  Create New Format in Herd
*  Register Data in Herd</p>
<h2 id="how-to-add-the-object-in-herd-to-metastor">How To Add the Object in Herd to Metastor<a class="headerlink" href="#how-to-add-the-object-in-herd-to-metastor" title="Permanent link">&para;</a></h2>
<p>Once Business Object is created in Herd, there is an additional step to include the Objet in Metastor so that the Object is query-able in BDSQL. This step registers a Notification for the Object such that an Activity workflow is triggered for every Data Registration to this Object. This is a one time step for the Object. Once Object is registered for the Notification, all the future partitions registered for the Object will be available in BDSQL.</p>
<p>Here is the XML to add the Notification in Herd</p>
<p><strong>objectNotification.xml</strong></p>
<pre class="codehilite"><code>&lt;businessObjectDataNotificationRegistrationCreateRequest&gt;
    &lt;businessObjectDataNotificationRegistrationKey&gt;
        &lt;namespace&gt;MDL&lt;/namespace&gt;
        &lt;notificationName&gt;METASTOR_{{NAMESPACE}}_{{USAGE}}_{{OBJECT\_NAME}}\_{{FILE_FORMAT}}&lt;/notificationName&gt;
    &lt;/businessObjectDataNotificationRegistrationKey&gt;
    &lt;businessObjectDataEventType&gt;BUS\_OBJCT\_DATA\_STTS\_CHG&lt;/businessObjectDataEventType&gt;
    &lt;businessObjectDataNotificationFilter&gt;
        &lt;namespace&gt;{{NAMESPACE}}&lt;/namespace&gt;
        &lt;businessObjectDefinitionName&gt;{{OBJECT_NAME}}&lt;/businessObjectDefinitionName&gt;
        &lt;businessObjectFormatUsage&gt;{{USAGE}}&lt;/businessObjectFormatUsage&gt;
        &lt;businessObjectFormatFileType&gt;{{FILE_FORMAT}}&lt;/businessObjectFormatFileType&gt;
        &lt;newBusinessObjectDataStatus&gt;VALID&lt;/newBusinessObjectDataStatus&gt;
        &lt;storageName&gt;S3_MANAGED&lt;/storageName&gt;
    &lt;/businessObjectDataNotificationFilter&gt;
    &lt;jobActions&gt;
        &lt;jobAction&gt;
            &lt;namespace&gt;MDL&lt;/namespace&gt;
            &lt;jobName&gt;addPartitionWorkflow&lt;/jobName&gt;
        &lt;/jobAction&gt;
    &lt;/jobActions&gt;
    &lt;notificationRegistrationStatus&gt;ENABLED&lt;/notificationRegistrationStatus&gt;
&lt;/businessObjectDataNotificationRegistrationCreateRequest&gt;</code></pre>


<p>NOTE: 
Replace {{NAMESPACE}} with the actual Namespace of the Object
Replace {{USAGE}} with the actual Usage of the Object
Replace {{OBJECT_NAME}} with the actual Object Name
Replace {{FILE_FORMAT}} with the actual File Type for the Object</p>
<p>Here is the cURL syntax to add the Notification for the Object:</p>
<p><strong>cURL Command</strong></p>
<pre class="codehilite"><code>cat objectNotification.xml | curl -H &quot;Content-Type: application/xml&quot; -d @- -X POST http://HERD\_DNS\_NAME/herd-app/rest/notificationRegistrations/businessObjectDataNotificationRegistrations | xmllint --format -</code></pre>


<h2 id="how-to-query-the-data-in-bdsql">How To Query the Data in BDSQL<a class="headerlink" href="#how-to-query-the-data-in-bdsql" title="Permanent link">&para;</a></h2>
<p><strong>Prerequisites</strong></p>
<ul>
<li>AWS Console Access of the AWS Account, where MDL is created</li>
<li>SQL Client with Presto Driver<ul>
<li>Refer <a href="https://prestodb.io/docs/current/installation/jdbc.html">Presto Documentation</a> for the JDBC Driver</li>
</ul>
</li>
<li>MDL Instance Name of the MDL stack<ul>
<li>This is the parameter to the MDL Cloudformation Stack</li>
</ul>
</li>
</ul>
<p><strong>Steps</strong></p>
<ul>
<li>Login to AWS Console and navigate to Clouformation </li>
<li>Go to the Outputs Section of the MDL stack and Note down the value for the key "BdsqlURL"<ul>
<li>This is the Bdsql JDBC URL</li>
<li>Example - jdbc:<a href="presto://mdl.poc.aws.mdldomain.com:443/hive">presto://mdl.poc.aws.mdldomain.com:443/hive</a></li>
</ul>
</li>
<li>If (EnableSSLAndAuth == false)  <ul>
<li>Use the above URL with default user name "hadoop" and without password to login to BDSQL using SQL Client that supports Presto JDBC Driver</li>
</ul>
</li>
<li>If (EnableSSLAndAuth == true)<ul>
<li>Navigate to SSM Parameter section (Refer <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-console.html">AWS Documentation</a>) for Username and Password</li>
<li>User Name<ul>
<li>Open Parameter /app/MDL/${MDLInstanceName}/${Environment}/LDAP/MdlAppUsername</li>
<li>Example :  /app/MDL/mdl/dev/LDAP/MdlAppUsername</li>
<li>Get the Value for the above parameter. That value specifies the user name for Herd/Bdsql/Shepherd</li>
<li>Example: ldap_mdl_app_user</li>
</ul>
</li>
<li>Password  <ul>
<li>Open Parameter /app/MDL/${MDLInstanceName}/${Environment}/LDAP/MDLAppPassword</li>
<li>Example :  /app/MDL/mdl/dev/LDAP/MDLAppPassword</li>
<li>Get the Value for the above parameter. That value specifies the password for Herd/Bdsql/Shepherd, and this parameter is a Secure String</li>
<li>Example: ODMyOTdmZmE5</li>
</ul>
</li>
<li>Use the above URL, User name, and Password to login to Bdsql using the SQL Client that supports Presto JDBC Driver</li>
</ul>
</li>
</ul>
<h2 id="how-to-manage-openldap-users-groups">How To Manage OpenLDAP Users &amp; Groups<a class="headerlink" href="#how-to-manage-openldap-users-groups" title="Permanent link">&para;</a></h2>
<p>MDL provides a helper script to manage users and groups. The script is deployed onto the OpenLDAP server in /home/mdladmin/deploy/mdl/scripts/.</p>
<p><strong>Usage and examples</strong></p>
<p># ./manageLdap.sh --help</p>
<p>Usage:
<code>manageLdap.sh --action \[create\_user|create\_group|add\_user\_to\_group|show\_directory\] \[--user name\] \[--group name\] \[--dn distinguishedname\]</code></p>
<p>Examples:</p>
<pre class="codehilite"><code>manageLdap.sh --action create_user --user userA
manageLdap.sh --action create_group --user userA --group groupA
manageLdap.sh --action add\_user\_to_group --user userB --group groupA
manageLdap.sh --action delete_object --dn &quot;cn=userA,ou=People,ou=Groups,cn=domain,cn=com&quot;
manageLdap.sh --action show_directory
manageLdap.sh --help</code></pre>


<p><strong>Create new user</strong></p>
<p><code>\# ./manageLdap.sh --action create_user --user userA</code></p>
<p>adding new entry "uid=userA,ou=People,dc=finra,dc=org"</p>
<p><strong>Create new group</strong></p>
<p><code>\# ./manageLdap.sh --action create_group --user userA --group groupA</code></p>
<p>adding new entry "cn=groupA,ou=Groups,dc=finra,dc=org"</p>
<p><strong>Add user to group</strong></p>
<p><code>\# ./manageLdap.sh --action add\_user\_to_group --user userB --group groupA</code></p>
<p>modifying entry "cn=groupA,ou=Groups,dc=finra,dc=org"</p>
<p><strong>Delete object</strong></p>
<p><code>\# ./manageLdap.sh --action delete_object --dn "uid=userA,ou=People,dc=finra,dc=org"</code></p>
<p><strong>Show directory information</strong></p>
<pre class="codehilite"><code>\# ./manageLdap.sh --action show_directory
\# extended LDIF
#
\# LDAPv3
\# base &lt;dc=finra,dc=org&gt; with scope subtree
\# filter: (objectclass=*)
\# requesting: ALL
#</code></pre>


<pre class="codehilite"><code>\# finra.org
dn: dc=finra,dc=org
objectClass: dcObject
objectClass: organization
o: finra.org
dc: finra

\# People, finra.org
dn: ou=People,dc=finra,dc=org
objectClass: top
objectClass: organizationalUnit
ou: People

\# Groups, finra.org
dn: ou=Groups,dc=finra,dc=org
objectClass: top
objectClass: organizationalUnit
ou: Groups

\# ldap\_mdl\_app_user, People, finra.org
dn: uid=ldap\_mdl\_app_user,ou=People,dc=finra,dc=org
uid: ldap\_mdl\_app_user
cn: ldap\_mdl\_app_user
sn: null
objectClass: inetOrgPerson
userPassword:: e1NTSEF9SXUwdXJHdXl1cnVkSFFISE4wbmRQZU05ZEkrRiszYng=

\# ldap\_sec\_app_user, People, finra.org
dn: uid=ldap\_sec\_app_user,ou=People,dc=finra,dc=org
uid: ldap\_sec\_app_user
cn: ldap\_sec\_app_user
sn: null
objectClass: inetOrgPerson
userPassword:: e1NTSEF9UlVGVGoxVnJ2c3dVemxZdDlvRHltTXNXMnByaDFlWGo=

\# APP\_MDL\_Users, Groups, finra.org
dn: cn=APP\_MDL\_Users,ou=Groups,dc=finra,dc=org
objectClass: top
objectClass: groupOfNames
member: uid=ldap\_mdl\_app_user,ou=People,dc=finra,dc=org
cn: APP\_MDL\_Users

\# userB, People, finra.org
dn: uid=userB,ou=People,dc=finra,dc=org
uid: userB
cn: userB
sn: null
objectClass: inetOrgPerson
userPassword:: e1NTSEF9bVZJTGJLcTk4THNmSFVSeXhyQ3d5U0Qybm0xQnNMY0E=

\# userA, People, finra.org
dn: uid=userA,ou=People,dc=finra,dc=org
uid: userA
cn: userA
sn: null
objectClass: inetOrgPerson
userPassword:: e1NTSEF9WlpFeHhaL3pFZmZ0dUJJbWdoSkJkUy9aV0hEejVYY2g=

\# groupA, Groups, finra.org
dn: cn=groupA,ou=Groups,dc=finra,dc=org
objectClass: top
objectClass: groupOfNames
member: uid=userA,ou=People,dc=finra,dc=org
member: uid=userB,ou=People,dc=finra,dc=org
cn: groupA

\# search result
search: 2
result: 0 Success

\# numResponses: 10
\# numEntries: 9</code></pre>


<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<hr />
<p><em>Problem</em></p>
<p>Cloud formation fails with error "The maximum number of addresses has been reached". This happens while creating VPC.</p>
<p><em>Cause</em></p>
<p>The account has reached the maximum number of EIPs. EIPs are needed while configuring VPC for NatGateway.</p>
<p><em>Solution</em></p>
<ol>
<li>Recreate the MDL stack with option "VPC=false". In this case, user needs to create SSM parameters as per "CreateVPC" section in <a href="../advanced-install.md/#conditional-parameters">Herd-MDL CFT Specifications</a>   </li>
<li>Increase the account level limit for EIPs so that NatGateway doesn't fail while allocating EIP in the account</li>
</ol>
<hr />
<p><em>Problem</em></p>
<p>Cloud formation fails with error "Already exists in stack". This happens while creating AWS resources.</p>
<p><em>Cause</em></p>
<p>There is already another stack with the same MDLInstanceName in the AWS account. </p>
<p><em>Solution</em></p>
<ol>
<li>Delete the existing stack with same "MDLInstanceName" and then re-try creating the new stack</li>
<li>Enter different "MDLInstanceName" for the new stack so that this does not collide with existing resources</li>
</ol>
<hr />
<p><em>Problem</em></p>
<p>Code Deploy fails with error "HEALTH_CONSTRAINTS". This happens with ElasticSearch/Herd/Metastor EC2 instances.</p>
<p><em>Cause</em></p>
<p>This seems to be an AWS issue that occurs occasionally. Under certain cases, CodeDeploy is unable to find the EC2 Instances created by AutoScaling group. </p>
<p><em>Solution</em></p>
<ol>
<li>Restart the Stack Creation process   </li>
</ol>
<h2 id="known-issues">Known Issues<a class="headerlink" href="#known-issues" title="Permanent link">&para;</a></h2>
<ol>
<li>Emptying S3 buckets manually before deleting the stack</li>
</ol>
<p>S3 buckets need to be emptied before deleting the stack. Otherwise, stack deletion fails. This will be fixed in future releases such that MDL takes care of emptying the buckets when Stack Deletion is triggered.</p>
<ol>
<li>Deleting SSM parameters manually before deleting the stack</li>
</ol>
<p>Some of the SSM parameters need to be deleted before deleting the stack. Note that Stack Deletion will not fail. However, these SSM parameters will be stale, if they are not cleaned-up. Search for all the SSM parameters with "MDLInstanceName" and delete the same for clean-up. This will be fixed in future releases such that MDL takes care of deleting all the SSM parameters, when Stack Deletion is triggered.</p>
<ol>
<li>Deleting RDS Snapshots</li>
</ol>
<p>AWS account has limits for number of RDS snapshots stored. MDL by default stores the RDS snapshot before deleting the same. If the number of RDS snapshots reach the AWS account limit, then MDL cannot delete the stack due to RDS snapshot issue. In this case, the user either needs to clean-up existing RDS snapshots or increase the RDS snapshot limit for the AWS account. </p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../user-guide/" title="User Guide" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                User Guide
              </span>
            </div>
          </a>
        
        
          <a href="../tech-overview/" title="Technical Overview" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Technical Overview
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.js"></script>
      
      <script>app.initialize({version:"0.17.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>